import{r as n,c as x,q as p,l as v,o as y,w as g,a as j,j as s,d as f,b,s as N,e as S,T as w,S as C,n as M,f as E,B as F,N as R}from"./index-T4OdLxR4.js";const T=({room:c})=>{const[u,t]=n.useState([]),[i,d]=n.useState(""),o=x(f,"messages");n.useEffect(()=>{const e=p(o,g("room","==",c),y("createdAt"),v(5)),h=j(e,l=>{let r=[];l.forEach(m=>{r.push({...m.data(),id:m.id})}),console.log(r),t(r)});return()=>h()},[]);const a=async e=>{e.preventDefault(),i!==""&&(await b(o,{text:i,createdAt:N(),user:S.currentUser.displayName,room:c}),d(""))};return s.jsxs("div",{className:"chat-app",children:[s.jsx("div",{className:"header",children:s.jsxs("h1",{children:["Welcome to: ",c.toUpperCase()]})}),s.jsx("div",{className:"messages",children:u.map(e=>s.jsxs("div",{className:"message",children:[s.jsxs("span",{className:"user",children:[e.user,":"]})," ",e.text]},e.id))}),s.jsxs("form",{onSubmit:a,className:"new-message-form",children:[s.jsx("input",{type:"text",value:i,onChange:e=>d(e.target.value),className:"new-message-input",placeholder:"Type your message here..."}),s.jsx("button",{type:"submit",className:"send-button",children:"Send"})]})]})},U=()=>{const[c,u]=n.useState([]),[t,i]=n.useState(""),d=x(f,"users");n.useEffect(()=>{if(t==="")return;const a=p(d,g("firstName","==",t)),e=j(a,h=>{const l=h.docs.map(r=>({...r.data(),id:r.id}));console.log(l),u(l)});return()=>e()},[t]);const o=a=>{i(a.target.value)};return s.jsxs("div",{children:[s.jsx("div",{children:s.jsx(w,{label:"Search Users",value:t,onChange:o})}),s.jsx("div",{children:c.map(a=>s.jsx("div",{children:s.jsxs(C,{direction:"row",alignItems:"center",spacing:2,children:[s.jsx("img",{src:a.photoURL||M,alt:"users",style:{width:"60px",height:"60px",borderRadius:"50%"}}),s.jsx(E,{variant:"body1",children:a.firstName}),s.jsx(F,{children:"Add Friend"})]})},a.id))})]})};function q(){return s.jsxs(s.Fragment,{children:[s.jsx(T,{room:"1"}),s.jsx(U,{})]})}const B=()=>s.jsxs(s.Fragment,{children:[s.jsx(R,{}),s.jsx(q,{})]});export{B as default};
