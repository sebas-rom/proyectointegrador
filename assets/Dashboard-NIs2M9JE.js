import{r,c as j,q as g,l as f,o as N,w as v,a as y,j as e,b as d,n as m,d as b,e as U,s as S,f as w,T as R,S as A,g as C,B as E,N as F}from"./index-1jrB0v_E.js";const L=({room:n})=>{const[l,t]=r.useState([]),[i,o]=r.useState(""),u=j(b,"messages");r.useEffect(()=>{const s=g(u,v("room","==",n),N("createdAt"),f(5)),x=y(s,p=>{let h=[];p.forEach(c=>{h.push({...c.data(),id:c.id})}),t(h)});return()=>x()},[]);const a=async s=>{s.preventDefault(),i!==""&&(await U(u,{text:i,createdAt:S(),user:d.currentUser.displayName,uid:d.currentUser.uid,phoyoURL:d.currentUser.photoURL,room:n}),o(""))};return e.jsxs("div",{className:"chat-app",children:[e.jsx("div",{className:"header",children:e.jsxs("h1",{children:["Welcome to: ",n.toUpperCase()]})}),e.jsx("div",{className:"messages",children:l.map(s=>e.jsxs("div",{className:"message",children:[s.uid!==d.currentUser.uid&&e.jsx("img",{src:s.photoURL||m,alt:"Avatar",style:{width:"50px",height:"50px",borderRadius:"50%"}}),e.jsxs("span",{className:"user",children:[s.user,":"]})," ",s.text,s.uid==d.currentUser.uid&&e.jsx("img",{src:s.photoURL||m,alt:"Avatar",style:{width:"50px",height:"50px",borderRadius:"50%"}})]},s.id))}),e.jsxs("form",{onSubmit:a,className:"new-message-form",children:[e.jsx("input",{type:"text",value:i,onChange:s=>o(s.target.value),className:"new-message-input",placeholder:"Type your message here..."}),e.jsx("button",{type:"submit",className:"send-button",children:"Send"})]})]})},M=()=>{const[n,l]=r.useState([]),[t,i]=r.useState(""),o=j(b,"users");r.useEffect(()=>{if(t==="")return;const a=w.remove(t),s=g(o,v("searchableName",">=",a)),x=y(s,p=>{const h=p.docs.map(c=>({...c.data(),id:c.id}));l(h)});return()=>x()},[t]);const u=a=>{i(a.target.value)};return e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(R,{label:"Search Users",value:t,onChange:u})}),e.jsx("div",{children:n.map(a=>e.jsx("div",{children:e.jsxs(A,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx("img",{src:a.photoURL||m,alt:"users",style:{width:"60px",height:"60px",borderRadius:"50%"}}),e.jsx(C,{variant:"body1",children:a.firstName}),e.jsx(E,{children:"Add Friend"})]})},a.id))})]})};function T(){return e.jsxs(e.Fragment,{children:[e.jsx(L,{room:"1"}),e.jsx(M,{})]})}const B=()=>e.jsxs(e.Fragment,{children:[e.jsx(F,{}),e.jsx(T,{})]});export{B as default};
