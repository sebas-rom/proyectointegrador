import{r,c as j,q as g,l as f,o as N,w as v,a as y,j as e,b as l,n as p,d as b,e as S,s as w,f as U,T as R,S as A,g as C,B as E,N as F}from"./index-sSyCYQgw.js";const M=({room:n})=>{const[h,t]=r.useState([]),[i,d]=r.useState(""),u=j(b,"messages");r.useEffect(()=>{const s=g(u,v("room","==",n),N("createdAt"),f(5)),x=y(s,m=>{let o=[];m.forEach(c=>{o.push({...c.data(),id:c.id})}),t(o)});return()=>x()},[]);const a=async s=>{s.preventDefault(),i!==""&&(await S(u,{text:i,createdAt:w(),user:l.currentUser.displayName,uid:l.currentUser.uid,room:n}),d(""))};return e.jsxs("div",{className:"chat-app",children:[e.jsx("div",{className:"header",children:e.jsxs("h1",{children:["Welcome to: ",n.toUpperCase()]})}),e.jsx("div",{className:"messages",children:h.map(s=>e.jsxs("div",{className:"message",children:[s.uid!==l.currentUser.uid&&e.jsx("img",{src:s.photoURL||p,alt:"Avatar",style:{width:"50px",height:"50px",borderRadius:"50%"}}),e.jsxs("span",{className:"user",children:[s.user,":"]})," ",s.text,s.uid==l.currentUser.uid&&e.jsx("img",{src:s.photoURL||p,alt:"Avatar",style:{width:"50px",height:"50px",borderRadius:"50%"}})]},s.id))}),e.jsxs("form",{onSubmit:a,className:"new-message-form",children:[e.jsx("input",{type:"text",value:i,onChange:s=>d(s.target.value),className:"new-message-input",placeholder:"Type your message here..."}),e.jsx("button",{type:"submit",className:"send-button",children:"Send"})]})]})},T=()=>{const[n,h]=r.useState([]),[t,i]=r.useState(""),d=j(b,"users");r.useEffect(()=>{if(t==="")return;const a=U.remove(t),s=g(d,v("searchableName",">=",a)),x=y(s,m=>{const o=m.docs.map(c=>({...c.data(),id:c.id}));h(o)});return()=>x()},[t]);const u=a=>{i(a.target.value)};return e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(R,{label:"Search Users",value:t,onChange:u})}),e.jsx("div",{children:n.map(a=>e.jsx("div",{children:e.jsxs(A,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx("img",{src:a.photoURL||p,alt:"users",style:{width:"60px",height:"60px",borderRadius:"50%"}}),e.jsx(C,{variant:"body1",children:a.firstName}),e.jsx(E,{children:"Add Friend"})]})},a.id))})]})};function q(){return e.jsxs(e.Fragment,{children:[e.jsx(M,{room:"1"}),e.jsx(T,{})]})}const D=()=>e.jsxs(e.Fragment,{children:[e.jsx(F,{}),e.jsx(q,{})]});export{D as default};
