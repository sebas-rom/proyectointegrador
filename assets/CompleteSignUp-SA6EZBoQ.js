import{V as u,r as i,Z as v,aj as U,j as t,C as S,P as L,b as q,T as w,c as p,B as E,$ as P,a7 as f,a0 as h,a3 as g,ak as B,al as x}from"./index-LqOURNGf.js";import{G as y}from"./Grid-fES7pWt6.js";const W=({setSignupCompleted:j})=>{const b=u.currentUser,[r,C]=i.useState(null),[a,c]=i.useState(""),[s,d]=i.useState(""),m=v(P,"users"),{setLoading:o}=U();i.useEffect(()=>{(async()=>{try{o(!0);const l=(await f(h(m,g("uid","==",u.currentUser.uid)))).docs[0].data();C(l),c(l.firstName),d(l.lastName)}catch(n){console.error("Error fetching user:",n)}finally{o(!1)}})()},[b]);const N=async()=>{if(!(a===(r==null?void 0:r.firstName)&&s===(r==null?void 0:r.lastName)))try{console.log("Updating user profile..."),o(!0);const e=await f(h(m,g("uid","==",u.currentUser.uid)));if(e.docs.length>0){const n=e.docs[0].ref;await B(n,{firstName:a,lastName:s,searchableFirstName:x.remove(a).toLowerCase(),searchableLastName:x.remove(s).toLowerCase(),signUpCompleted:!0}),j(!0)}else console.error("User not found.")}catch(e){console.error("Error updating user profile:",e)}finally{o(!1)}};return t.jsx(S,{sx:{top:0,left:0,right:0,bottom:0,height:"100%",position:"absolute",zIndex:9999,minWidth:"100%",backgroundColor:"rgba(0, 0, 0, 0.2)",backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(y,{container:!0,justifyContent:"center",alignItems:"center",children:t.jsx(y,{item:!0,xs:10,sm:8,md:6,lg:4,children:t.jsx(L,{elevation:3,style:{padding:"20px"},children:t.jsxs(q,{component:"form",onSubmit:N,children:[t.jsx(w,{variant:"h5",align:"center",gutterBottom:!0,children:"Complete Your Profile"}),t.jsx(p,{label:"Name",fullWidth:!0,required:!0,margin:"normal",value:a,onChange:e=>c(e.target.value)}),t.jsx(p,{label:"Lastname",required:!0,fullWidth:!0,margin:"normal",value:s,onChange:e=>d(e.target.value)}),t.jsx(E,{variant:"contained",color:"primary",fullWidth:!0,type:"submit",style:{marginTop:"20px"},children:"Update Profile"})]})})})})})};export{W as default};
