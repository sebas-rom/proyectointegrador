import{z as l,r as n,A as N,ac as v,j as t,a1 as S,ad as p,P as w,J as D,T as L,a2 as f,K as q,C as E,O as h,D as g,H as x,ae as P,af as y,ag as F}from"./index--FmND1b6.js";const W=({setSignupCompleted:b})=>{const j=l.currentUser,[u,U]=n.useState(null),[r,c]=n.useState(""),[a,d]=n.useState(""),m=N(E,"users"),{setLoading:s}=v();n.useEffect(()=>{(async()=>{try{s(!0);const i=(await h(g(m,x("uid","==",l.currentUser.uid)))).docs[0].data();U(i),c(i.firstName),d(i.lastName)}catch(o){console.error("Error fetching user:",o)}finally{s(!1)}})()},[j]);const C=async()=>{if(!(r===u.firstName&&a===u.lastName))try{console.log("Updating user profile..."),s(!0);const e=await h(g(m,x("uid","==",l.currentUser.uid)));if(e.docs.length>0){const o=e.docs[0].ref;await P(o,{firstName:r,lastName:a,searchableFirstName:y.remove(r).toLowerCase(),searchableLastName:y.remove(a).toLowerCase(),signUpCompleted:!0}),await F(r+" "+a),b(!0)}else console.error("User not found.")}catch(e){console.error("Error updating user profile:",e)}finally{s(!1)}};return t.jsx(S,{sx:{top:0,left:0,right:0,bottom:0,height:"100%",position:"absolute",zIndex:9999,minWidth:"100%",backgroundColor:"rgba(0, 0, 0, 0.2)",backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(p,{container:!0,justifyContent:"center",alignItems:"center",children:t.jsx(p,{item:!0,xs:10,sm:8,md:6,lg:4,children:t.jsx(w,{elevation:3,style:{padding:"20px"},children:t.jsxs(D,{component:"form",onSubmit:C,children:[t.jsx(L,{variant:"h5",align:"center",gutterBottom:!0,children:"Complete Your Profile"}),t.jsx(f,{label:"Name",fullWidth:!0,required:!0,margin:"normal",value:r,onChange:e=>c(e.target.value)}),t.jsx(f,{label:"Lastname",required:!0,fullWidth:!0,margin:"normal",value:a,onChange:e=>d(e.target.value)}),t.jsx(q,{variant:"contained",color:"primary",fullWidth:!0,type:"submit",style:{marginTop:"20px"},children:"Update Profile"})]})})})})})};export{W as default};
